{
  "name": "KeyPaws",
  "main": "./app/index.js",
  "version": "0.2.5",
  "build": {
    "appId": "com.aliblackwell.KeyPaws",
    "nwVersion": "0.43.3",
    "packed": true,
    "targets": [
      "nsis7z"
    ],
    "strippedProperties": [
      "build"
    ],
    "outputPattern": "${NAME} ${VERSION} ${PLATFORM} ${ARCH}",
    "mac": {
      "displayName": "KeyPaws",
      "copyright": "copyright",
      "icon": "./app/assets/icons.icns",
      "plistStrings": {
        "CFBundleName": "KeyPaws",
        "CFBundleIdentifier": "com.aliblackwell.KeyPaws",
        "CFBundleDocumentTypes": []
      }
    },
    "nsis": {
      "installDirectory": "$PROGRAMFILES\\${_COMPANYNAME}\\${_APPNAME}",
      "diffUpdaters": true
    }
  },
  "window": {
    "show_in_taskbar": false
  },
  "dependencies": {
    "netlify-cli": "^2.25.0",
    "nw": "^0.42.6"
  },
  "scripts": {
    "lint": "eslint --fix './app/*.js' './app/*.html'",
    "start": "nw --enable-logging=stderr",
    "record:cat": "python3 ./capture/record.py cat",
    "record:human": "python3 ./capture/record.py human",
    "ml:wrangle": "python3 ./capture/wrangle.py",
    "clear-settings": "rm -rf /Users/aliblackwell/Library/ApplicationSupport/Keypaws/Default/*.json",
    "clean": "rm -rf ./dist/ ./background/ ./build/ ./ship-mac/KeyPaws.app ./ship-mac/*.zip ./ship-mac/*.dmg ./downloads/*.dmg",
    "update:package": "cp *.js ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/ && cp ./app/*.html ./app/*.css ./app/*.js ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/app/",
    "update:app": "cp *.js /Applications/KeyPaws.app/Contents/Resources/app.nw/ && cp ./app/*.html ./app/*.css ./app/*.js /Applications/KeyPaws.app/Contents/Resources/app.nw/app/",
    "build:keypaws": "pyinstaller ./capture/keypaws.spec",
    "build:record": "pyinstaller ./capture/record.spec",
    "build:trigger": "pyinstaller ./capture/trigger.spec",
    "bundle:python": "mkdir background && mv ./dist/keypaws ./background/keypaws && mv ./dist/trigger ./background/trigger",
    "build:app": "build --tasks mac-x64 --mirror https://dl.nwjs.io/ . && dotenv -- cross-var mv ./dist/KeyPaws\\ %VERSION_NUMBER%\\ mac\\ x64/KeyPaws.app ./ship-mac/KeyPaws.app",
    "tidy:app": "rm -rf ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/node_modules ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/downloads ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/capture ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/capture ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/ship-mac ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/site ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/build && chmod 775 ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/background/keypaws/keypaws ./ship-mac/KeyPaws.app/Contents/Resources/app.nw/background/trigger/trigger",
    "sign": "dotenv -- cross-var codesign --options runtime --entitlements ship-mac/entitlements.plist --force --verbose=4 --sign %APPLE_DEVELOPER_ID% --deep ./ship-mac/KeyPaws.app",
    "verify": "codesign --verify --deep --strict --verbose=2 ./ship-mac/KeyPaws.app",
    "is-entitled": "codesign -dvvv --entitlements :- ./ship-mac/KeyPaws.app/",
    "build": "npm run clean && npm run build:keypaws && npm run build:trigger && npm run bundle:python && npm run build:app && npm run tidy:app && npm run sign",
    "bundle:mac": "dotenv cross-var appdmg ./ship-mac/appdmg.json ./ship-mac/KeyPaws%VERSION_NUMBER%.dmg",
    "zip": "dotenv -- cross-var zip -r ./ship-mac/KeyPaws%VERSION_NUMBER%.zip ./ship-mac/KeyPaws%VERSION_NUMBER%.dmg",
    "notarize": "dotenv -- cross-var xcrun altool -t osx -f './ship-mac/KeyPaws%VERSION_NUMBER%.zip' --primary-bundle-id com.aliblackwell.KeyPaws --notarize-app --verbose -itc_provider 6B4HNA4Z97 --username aliblackwell@protonmail.com",
    "staple": "dotenv cross-var xcrun stapler staple ./ship-mac/KeyPaws%VERSION_NUMBER%.dmg && dotenv cross-var mv ./ship-mac/KeyPaws%VERSION_NUMBER%.dmg ./downloads/KeyPaws%VERSION_NUMBER%.dmg"
  },
  "devDependencies": {
    "cross-var": "^1.1.0",
    "dotenv-cli": "^3.1.0",
    "eslint": "^6.8.0",
    "eslint-config-prettier": "^6.9.0",
    "eslint-plugin-html": "^6.0.0",
    "eslint-plugin-prettier": "^3.1.2",
    "husky": "^3.1.0",
    "lint-staged": "^9.5.0",
    "nwjs-builder-phoenix": "^1.15.0",
    "prettier": "^1.19.1"
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "./app/**/*.{js,html}": [
      "eslint --fix",
      "git add"
    ],
    "./capture/*.{py}": [
      "pylint",
      "git add"
    ]
  }
}
