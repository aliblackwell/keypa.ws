{
  "name": "KeyPaws",
  "main": "./app/index.js",
  "version": "0.1.0",
  "build": {
    "appId": "com.aliblackwell.KeyPaws",
    "nwVersion": "0.43.3",
    "packed": true,
    "targets": [
      "nsis7z"
    ],
    "strippedProperties": [
      "build"
    ],
    "outputPattern": "${NAME} ${VERSION} ${PLATFORM} ${ARCH}",
    "mac": {
      "displayName": "KeyPaws",
      "copyright": "copyright",
      "icon": "./app/assets/icons.icns",
      "plistStrings": {
        "CFBundleName": "KeyPaws",
        "CFBundleIdentifier": "com.aliblackwell.KeyPaws",
        "CFBundleDocumentTypes": []
      }
    },
    "nsis": {
      "installDirectory": "$PROGRAMFILES\\${_COMPANYNAME}\\${_APPNAME}",
      "diffUpdaters": true
    }
  },
  "window": {
    "show_in_taskbar": false
  },
  "dependencies": {
    "netlify-cli": "^2.25.0",
    "nw": "^0.42.6"
  },
  "scripts": {
    "lint": "eslint --fix './app/*.js' './app/*.html'",
    "start": "nw --enable-logging=stderr",
    "clear-settings": "rm -rf /Users/aliblackwell/Library/ApplicationSupport/Keypaws/Default/*.json",
    "clean": "rm -rf ./dist/ ./background/ ./build/ ./package/KeyPaws.app ./downloads/KeyPaws0.1.0.dmg",
    "update:package": "cp *.js ./package/KeyPaws.app/Contents/Resources/app.nw/ && cp ./app/*.html ./app/*.css ./app/*.js ./package/KeyPaws.app/Contents/Resources/app.nw/app/",
    "update:app": "cp *.js /Applications/KeyPaws.app/Contents/Resources/app.nw/ && cp ./app/*.html ./app/*.css ./app/*.js /Applications/KeyPaws.app/Contents/Resources/app.nw/app/",
    "build:keypaws": "pyinstaller ./listener/keypaws.py ./listener/kaybord.spec",
    "build:record": "pyinstaller ./capture/record.py ./record.spec",
    "build:trigger": "pyinstaller ./listener/trigger.py ./listener/kaybord.spec && cp ./dist/trigger/trigger ./dist/keypaws/trigger && rm -rf ./dist/trigger",
    "build:app": "mkdir background && mv ./dist/keypaws ./background/keypaws && build --tasks mac-x64 --mirror https://dl.nwjs.io/ . && mv ./dist/KeyPaws\\ 0.1.0\\ mac\\ x64/KeyPaws.app ./package/KeyPaws.app && rm -rf ./package/KeyPaws.app/Contents/Resources/app.nw/node_modules ./package/KeyPaws.app/Contents/Resources/app.nw/downloads ./package/KeyPaws.app/Contents/Resources/app.nw/capture ./package/KeyPaws.app/Contents/Resources/app.nw/listener ./package/KeyPaws.app/Contents/Resources/app.nw/package ./package/KeyPaws.app/Contents/Resources/app.nw/site ./package/KeyPaws.app/Contents/Resources/app.nw/build && chmod 775 ./package/KeyPaws.app/Contents/Resources/app.nw/background/keypaws/keypaws ./package/KeyPaws.app/Contents/Resources/app.nw/background/keypaws/trigger",
    "sign": "codesign --options runtime --entitlements entitlements.plist --force --verbose=4 --sign 'Developer ID Application: Alasdair Blackwell (6B4HNA4Z97)' --deep ./package/KeyPaws.app",
    "verify": "codesign --verify --deep --strict --verbose=2 ./package/KeyPaws.app",
    "is-entitled": "codesign -dvvv --entitlements :- ./package/KeyPaws.app/",
    "build": "npm run clean && npm run build:keypaws && npm run build:trigger && npm run build:app && npm run sign",
    "package": "appdmg ./package/appdmg.json ./package/KeyPaws0.1.0.dmg",
    "zip": "zip -r ./package/KeyPaws0.1.0.zip ./package/KeyPaws0.1.0.dmg",
    "notarize": "xcrun altool -t osx -f './package/KeyPaws0.1.0.zip' --primary-bundle-id com.aliblackwell.KeyPaws --notarize-app --verbose -itc_provider 6B4HNA4Z97 --username aliblackwell@protonmail.com",
    "staple": "xcrun stapler staple ./package/KeyPaws0.1.0.dmg && mv ./package/KeyPaws0.1.0.dmg ./downloads/KeyPaws0.1.0.dmg"
  },
  "devDependencies": {
    "eslint": "^6.8.0",
    "eslint-config-prettier": "^6.9.0",
    "eslint-plugin-html": "^6.0.0",
    "eslint-plugin-prettier": "^3.1.2",
    "husky": "^3.1.0",
    "lint-staged": "^9.5.0",
    "nwjs-builder-phoenix": "^1.15.0",
    "prettier": "^1.19.1"
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "./app/**/*.{js,html}": [
      "eslint --fix",
      "git add"
    ]
  }
}
